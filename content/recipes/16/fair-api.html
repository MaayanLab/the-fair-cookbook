<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Developing FAIR API</title>
  <meta name="description" content="# Developing FAIR API**Authors**: [Daniel J. B. Clarke](https://orcid.org/0000-0003-3471-7416)**Maintainers**: [Daniel J. B. Clarke](https://orcid.org/0000-0...">

  <link rel="canonical" href="https://nih-cfde.github.io/the-fair-cookbook/content/recipes/16/fair-api.html">
  <link rel="alternate" type="application/rss+xml" title="NIH-CFDE FAIR COOKBOOK" href="https://nih-cfde.github.io/the-fair-cookbook/feed.xml">

  <meta property="og:url"         content="https://nih-cfde.github.io/the-fair-cookbook/content/recipes/16/fair-api.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Developing FAIR API" />
<meta property="og:description" content="# Developing FAIR API**Authors**: [Daniel J. B. Clarke](https://orcid.org/0000-0003-3471-7416)**Maintainers**: [Daniel J. B. Clarke](https://orcid.org/0000-0..." />
<meta property="og:image"       content="https://nih-cfde.github.io/the-fair-cookbook/images/logo/CFDE-logo-contrast.png" />

<meta name="twitter:card" content="summary">


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": "https://nih-cfde.github.io/the-fair-cookbook/content/recipes/16/fair-api.html",
  "headline": "Developing FAIR API",
  "datePublished": "2020-06-09T22:35:21+00:00",
  "dateModified": "2020-06-09T22:35:21+00:00",
  "description": "# Developing FAIR API**Authors**: [Daniel J. B. Clarke](https://orcid.org/0000-0003-3471-7416)**Maintainers**: [Daniel J. B. Clarke](https://orcid.org/0000-0...",
  "author": {
    "@type": "Person",
    "name": "CFDE"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nih-cfde.github.io/the-fair-cookbook",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://nih-cfde.github.io/the-fair-cookbook",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/the-fair-cookbook/assets/css/styles.css">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/the-fair-cookbook/images/logo/CFDE-logo.ico">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<!-- (mostly) copied from nbconvert configuration -->
<!-- https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/html/mathjax.tpl -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true },
    },
    
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML' async></script>


  <!-- DOM updating function -->
  <script src="/the-fair-cookbook/assets/js/page/dom-update.js"></script>

  <!-- Selectors for elements on the page -->
  <script src="/the-fair-cookbook/assets/js/page/documentSelectors.js"></script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '/the-fair-cookbook';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js" async></script>
  <script src="/the-fair-cookbook/assets/js/page/anchors.js" async></script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->


<!-- Display Thebelab button in each code cell -->
<script>
/**
 * Set up thebelab button for code blocks
 */

const thebelabCellButton = id =>
  `<a id="thebelab-cell-button-${id}" class="btn thebebtn o-tooltip--left" data-tooltip="Interactive Mode">
    <img src="/the-fair-cookbook/assets/images/edit-button.svg" alt="Start thebelab interactive mode">
  </a>`


const addThebelabButtonToCodeCells =  () => {

  const codeCells = document.querySelectorAll('div.input_area > div.highlight:not(.output) pre')
  codeCells.forEach((codeCell, index) => {
    const id = codeCellId(index)
    codeCell.setAttribute('id', id)
    if (document.getElementById("thebelab-cell-button-" + id) == null) {
      codeCell.insertAdjacentHTML('afterend', thebelabCellButton(id));
    }
  })
}

initFunction(addThebelabButtonToCodeCells);
</script>


<script src="https://unpkg.com/thebelab@latest/lib/index.js" async></script>
<script>
    /**
     * Add attributes to Thebelab blocks
     */

    const initThebelab = () => {
        const addThebelabToCodeCells = () => {
            console.log("Adding thebelab to code cells...");
            // If Thebelab hasn't loaded, wait a bit and try again. This
            // happens because we load ClipboardJS asynchronously.
            if (window.thebelab === undefined) {
                setTimeout(addThebelabToCodeCells, 250)
            return
            }

            // If we already detect a Thebelab cell, don't re-run
            if (document.querySelectorAll('div.thebelab-cell').length > 0) {
                return;
            }

            // Find all code cells, replace with Thebelab interactive code cells
            const codeCells = document.querySelectorAll('.input_area pre')
            codeCells.forEach((codeCell, index) => {
                const id = codeCellId(index)

                // Clean up the language to make it work w/ CodeMirror and add it to the cell
                dataLanguage = ""
                dataLanguage = detectLanguage(dataLanguage);
                codeCell.setAttribute('data-language', dataLanguage)
                codeCell.setAttribute('data-executable', 'true')

                // If the code cell is hidden, show it
                var inputCheckbox = document.querySelector(`input#hidebtn${codeCell.id}`);
                if (inputCheckbox !== null) {
                    setCodeCellVisibility(inputCheckbox, 'visible');
                }
            });

            // Remove the event listener from the page so keyboard press doesn't
            // Change page
            document.removeEventListener('keydown', initPageNav)
            keyboardListener = false;

            // Init thebelab
            thebelab.bootstrap();

            // Remove copy buttons since they won't work anymore
            const copyAndThebeButtons = document.querySelectorAll('.copybtn, .thebebtn')
            copyAndThebeButtons.forEach((button, index) => {
                button.remove();
            });

            // Remove outputs since they'll be stale
            const outputs = document.querySelectorAll('.output *, .output')
            outputs.forEach((output, index) => {
                output.remove();
            });

            // Find any cells with an initialization tag and ask ThebeLab to run them when ready
            var thebeInitCells = document.querySelectorAll('div.tag_thebelab-init');
            thebeInitCells.forEach((cell) => {
                console.log("Initializing ThebeLab with cell: " + cell.id);
                cell.querySelector('.thebelab-run-button').click();
            });
        }

        // Add event listener for the function to modify code cells
        const thebelabButtons = document.querySelectorAll('[id^=thebelab], [id$=thebelab]')
        thebelabButtons.forEach((thebelabButton,index) => {
            if (thebelabButton === null) {
                setTimeout(initThebelab, 250)
                return
            };
            thebelabButton.addEventListener('click', addThebelabToCodeCells);
        });
    }

    // Initialize Thebelab
    initFunction(initThebelab);

// Helper function to munge the language name
var detectLanguage = (language) => {
    if (language.indexOf('python') > -1) {
        language = "python";
    }
    return language;
}
</script>



  <!-- Load the auto-generating TOC (non-async otherwise the TOC won't load w/ turbolinks) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.8.1/tocbot.min.js" async></script>
  <script src="/the-fair-cookbook/assets/js/page/tocbot.js"></script>



<!-- using mermaid for rendering Diagram and flow chart -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js" async></script> -->
<script src="/the-fair-cookbook/assets/js/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
<!--  <script src="/the-fair-cookbook/assets/js/mermaid.js"></script>-->



  <!-- Google analytics -->
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>



  <!-- Clipboard copy button -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script>

  <!-- Load custom website scripts -->
  <script src="/the-fair-cookbook/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/the-fair-cookbook/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/the-fair-cookbook/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  
<script>
/**
  * To auto-embed hub URLs in interact links if given in a RESTful fashion
 */

function getJsonFromUrl(url) {
  var query = url.split('?');
  if (query.length < 2) {
    // No queries so just return false
    return false;
  }
  query = query[1];
  // Collect REST params into a dictionary
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}
    
function dict2param(dict) {
    params = Object.keys(dict).map(function(k) {
        return encodeURIComponent(k) + '=' + encodeURIComponent(dict[k])
    });
    return params.join('&')
}

// Parse a Binder URL, converting it to the string needed for JupyterHub
function binder2Jupyterhub(url) {
  newUrl = {};
  parts = url.split('v2/gh/')[1];
  // Grab the base repo information
  repoinfo = parts.split('?')[0];
  var [org, repo, ref] = repoinfo.split('/');
  newUrl['repo'] = ['https://github.com', org, repo].join('/');
  newUrl['branch'] = ref
  // Grab extra parameters passed
  params = getJsonFromUrl(url);
  if (params['filepath'] !== undefined) {
    newUrl['subPath'] = params['filepath']
  }
  return dict2param(newUrl);
}

// Filter out potentially unsafe characters to prevent xss
function safeUrl(url)
{
   return String(encodeURIComponent(url))
            .replace(/&/g, '&amp;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;');
}

function addParamToInternalLinks(hub) {
  var links = document.querySelectorAll("a").forEach(function(link) {
    var href = link.href;
    // If the link is an internal link...
    if (href.search("https://nih-cfde.github.io") !== -1 || href.startsWith('/') || href.search("127.0.0.1:") !== -1) {
      // Assume we're an internal link, add the hub param to it
      var params = getJsonFromUrl(href);
      if (params !== false) {
        // We have REST params, so append a new one
        params['jupyterhub'] = hub;
      } else {
        // Create the REST params
        params = {'jupyterhub': hub};
      }
      // Update the link
      var newHref = href.split('?')[0] + '?' + dict2param(params);
      link.setAttribute('href', decodeURIComponent(newHref));
    }
  });
  return false;
}


// Update interact links
function updateInteractLink() {
    // hack to make this work since it expects a ? in the URL
    rest = getJsonFromUrl("?" + location.search.substr(1));
    jupyterHubUrl = rest['jupyterhub'];
    var hubType = null;
    var hubUrl = null;
    if (jupyterHubUrl !== undefined) {
      hubType = 'jupyterhub';
      hubUrl = jupyterHubUrl;
    }

    if (hubType !== null) {
      // Sanitize the hubUrl
      hubUrl = safeUrl(hubUrl);

      // Add HTTP text if omitted
      if (hubUrl.indexOf('http') < 0) {hubUrl = 'http://' + hubUrl;}
      var interactButtons = document.querySelectorAll("button.interact-button")
      var lastButton = interactButtons[interactButtons.length-1];
      var link = lastButton.parentElement;

      // If we've already run this, skip the link updating
      if (link.nextElementSibling !== null) {
        return;
      }

      // Update the link and add context div
      var href = link.getAttribute('href');
      if (lastButton.id === 'interact-button-binder') {
        // If binder links exist, we need to re-work them for jupyterhub
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // If localhost, assume we're working from a local Jupyter server and remove `/hub`
          first = [hubUrl, 'git-sync'].join('/')
        } else {
          first = [hubUrl, 'hub', 'user-redirect', 'git-sync'].join('/')
        }
        href = first + '?' + binder2Jupyterhub(href);
      } else {
        // If interact button isn't binderhub, assume it's jupyterhub
        // If JupyterHub links, we only need to replace the hub url
        href = href.replace("", hubUrl);
        if (hubUrl.indexOf('http%3A%2F%2Flocalhost') > -1) {
          // Assume we're working from a local Jupyter server and remove `/hub`
          href = href.replace("/hub/user-redirect", "");
        }
      }
      link.setAttribute('href', decodeURIComponent(href));

      // Add text after interact link saying where we're launching
      hubUrlNoHttp = decodeURIComponent(hubUrl).replace('http://', '').replace('https://', '');
      link.insertAdjacentHTML('afterend', '<div class="interact-context">on ' + hubUrlNoHttp + '</div>');

      // Update internal links so we retain the hub url
      addParamToInternalLinks(hubUrl);
    }
}

runWhenDOMLoaded(updateInteractLink)
document.addEventListener('turbolinks:load', updateInteractLink)
</script>


  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" async></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>

  <!-- Load JS that depends on site variables -->
  <script src="/the-fair-cookbook/assets/js/page/copy-button.js" async></script>

  <!-- Hide cell code -->
  <script src="/the-fair-cookbook/assets/js/page/hide-cell.js" async></script>

  <!-- Printing the screen -->
  <!-- Include nbinteract for interactive widgets -->
<script src="https://printjs-4de6.kxcdn.com/print.min.js" async></script>
<script>
printContent = () => {
    // MathJax displays a second version of any math for assistive devices etc.
    // This prevents double-rendering in the PDF output.
    var ignoreAssistList = [];
    assistives = document.querySelectorAll('.MathJax_Display span.MJX_Assistive_MathML').forEach((element, index) => {
        var thisId = 'MathJax-assistive-' + index.toString();
        element.setAttribute('id', thisId);
        ignoreAssistList.push(thisId)
    });

    // Print the actual content object
    printJS({
        printable: 'textbook_content',
        type: 'html',
        css: "/the-fair-cookbook/assets/css/styles.css",
        style: "#textbook_content {padding-top: 40px};",
        scanStyles: false,
        targetStyles: ["*"],
        ignoreElements: ignoreAssistList,
        documentTitle: "Made with Jupyter Book"
    })
};

initPrint = () => {
    document.querySelector('#interact-button-print').addEventListener('click', printContent)
}

initFunction(initPrint)
</script>

</head>

  <body>
    <!-- Include the ThebeLab config so it gets reloaded on each page -->
    <script type="text/x-thebe-config">{
    requestKernel: true,
    binderOptions: {
    repo: "nih-cfde/the-fair-cookbook",
    ref: "gh-pages",
    },
    codeMirrorConfig: {
    theme: "abcdef",
    mode: "python"
    },
    kernelOptions: {
    kernelName: "python3",
    path: ""
    }
}
</script>

    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://nih-cfde.github.io/the-fair-cookbook/intro.html"><img src="/the-fair-cookbook/images/logo/CFDE-logo-contrast.png" class="textbook_logo" id="sidebar-logo" alt="textbook logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">NIH-CFDE FAIR COOKBOOK</h2>
  <ul class="c-sidebar__chapters">
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/intro">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/intro.html"
        >
          
          Introduction
        </a>
      </li>

      
      

      

      
      

      
        

        

        <ul class="c-sidebar__sections u-hidden-visually">
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/00/fair-principles">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/00/fair-principles.html"
              >
                
                What is FAIR?
              </a>
            </li>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/05/cfde">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/05/cfde.html"
              >
                
                Engaging with NIH-CFDE
              </a>
            </li>
            
            
          
        </ul>
      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/recipes/recipes-overview">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/recipes/recipes-overview.html"
        >
          
          Recipes
        </a>
      </li>

      
      

      

      
      

      
        

        

        <ul class="c-sidebar__sections u-hidden-visually">
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/06/cataloguing">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/06/cataloguing.html"
              >
                
                Discoverability
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/12/c2m2">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/12/c2m2.html"
                  >
                    
                    Introducing the Cross-Cut Metadata Model (C2M2)
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/12/C2M2-L1-description">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/12/C2M2-L1-description.html"
                  >
                    
                    Description of the Level-1 C2M2
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/06/cfde-namespaces">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/06/cfde-namespaces.html"
                  >
                    
                    CFDE Resource Naming
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/07/seo">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/07/seo.html"
                  >
                    
                    ETL to C2M2/DATS - the KidsFirst example
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/08/identifiers">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/08/identifiers.html"
              >
                
                Identification
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/08/1/pids">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/08/1/pids.html"
                  >
                    
                    Minting persistent and resolvable identifiers
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/08/2/minids">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/08/2/minids.html"
                  >
                    
                    Using MINIDs
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/09/finding">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/09/finding.html"
              >
                
                Semantics
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/10/ontologies">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/10/ontologies.html"
                  >
                    
                    Understanding terminologies
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/11/onto-services">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/11/onto-services.html"
                  >
                    
                    Ontology services
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/14/cfde-terminologies">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/14/cfde-terminologies.html"
                  >
                    
                    NIH CFDE selected terminologies
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/recipes/fair-assessment">
              <a class="c-sidebar__entry"
                href="/the-fair-cookbook/recipes/fair-assessment.html"
              >
                
                FAIR compliance
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/04/fairshake">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/04/fairshake.html"
                  >
                    
                    Evaluating FAIRness with FAIRshake
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/recipes/16/fair-api">
                  <a class="c-sidebar__entry"
                    href="/the-fair-cookbook/recipes/16/fair-api.html"
                  >
                    
                    Developing FAIR API
                  </a>
                </li>
              
              </ul>
            
            
          
        </ul>
      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/CFDE_Glossary">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/CFDE_Glossary.html"
        >
          
          Glossary
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/contributing">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/contributing.html"
        >
          
          Contributing
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/governance">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/governance.html"
        >
          
          Governance
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/license">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/license.html"
        >
          
          License
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/disclaimer">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/disclaimer.html"
        >
          
          Disclaimer
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/code_of_conduct">
        <a class="c-sidebar__entry"
          href="/the-fair-cookbook/code_of_conduct.html"
        >
          
          Code of Conduct
        </a>
      </li>

      
      

      

      
      

      

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="https://github.com/nih-cfde/the-fair-cookbook">
        <a class="c-sidebar__entry"
          href="https://github.com/nih-cfde/the-fair-cookbook"
        >
          
          GitHub repository
        </a>
      </li>

      
      

      

      
      

      

      
    
  </ul>
  <p class="sidebar_footer">Powered by <a href="https://jupyterbook.org">Jupyter Book</a></p>
</nav>

      
      <div class="c-topbar" id="top-navbar">
  <!-- We show the sidebar by default so we use .is-active -->
  <div class="c-topbar__buttons">
    <button
      id="js-sidebar-toggle"
      class="hamburger hamburger--arrowalt is-active"
    >
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button>
    <div class="buttons">
<div class="download-buttons-dropdown">
    <button id="dropdown-button-trigger" class="interact-button"><img src="/the-fair-cookbook/assets/images/download-solid.svg" alt="Download" /></button>
    <div class="download-buttons">
        
        <a id="interact-button-print"><button id="interact-button-download" class="interact-button">.pdf</button></a>
    </div>
</div>


</div>

  </div>
  <!-- Empty sidebar placeholder that we'll auto-fill with javascript -->
  <aside class="sidebar__right">
    <header><h4 class="nav__title"><img src="/the-fair-cookbook/assets/images/list-solid.svg" alt="Search" />   On this page</h4></header>
    <nav class="onthispage">
    </nav>
  </aside>
  <a href="/the-fair-cookbook/search.html" class="topbar-right-button" id="search-button">
    <img src="/the-fair-cookbook/assets/images/search-solid.svg" alt="Search" />
  </a>
</div>

      <main class="c-textbook__page" tabindex="-1">
            <div class="c-textbook__content" id="textbook_content">
              <h1 id="developing-fair-api">Developing FAIR API</h1>

<p><strong>Authors</strong>: <a href="https://orcid.org/0000-0003-3471-7416">Daniel J. B. Clarke</a></p>

<p><strong>Maintainers</strong>: <a href="https://orcid.org/0000-0003-3471-7416">Daniel J. B. Clarke</a></p>

<p><strong>Version</strong>: 1.0</p>

<p><strong>License</strong>: <a href="https://creativecommons.org/publicdomain/zero/1.0/deed.en">CC0 1.0 Universal (CC0 1.0) Public Domain Dedication</a></p>

<h2 id="background">Background</h2>
<p>An <a href="https://github.com/nih-cfde/specifications-and-documentation/blob/master/draft-CFDE_glossary/glossary.md#API">Application Programming Interface (API)</a>  refers to a mechanism for interfacing with a web service programmatically. Unlike a Graphical User Interface (GUI) designed to be used by an end-user, API are designed to be used by other computer programs. Designing and documenting an API for an application enables your application to be more interoperable with, and ultimately more reused, by other applications. Depending on the type of application, there are different ways to design APIs. Most important is that APIs should be documented well. We will not cover <a href="https://github.com/nih-cfde/specifications-and-documentation/blob/master/draft-CFDE_glossary/glossary.md#FAIR">FAIR</a> APIs of software libraries but instead focus on developing FAIR APIs for the web.</p>

<p>More and more web-based applications are becoming available each day. These applications typically perform complex operations on large databases. While web-based applications provide users with the capacity to access a tool, a database, or other resource programmatically, they are not always able to interoperate with other independent web applications. A web-based application that offers a FAIR API is more accessible to operating as part of workflows, or integration systems such as semantic search engines. This makes FAIR API development very relevant for data catalogs or web tools developed by the CF DCCs.</p>

<p>While a slew of standards exist for web API development and documentation, each has their own level of FAIRness. Here we are going to focus on <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">RESTful APIs</a> which can be described with <a href="https://www.openapis.org/">OpenAPI</a> (previously Swagger) to take advantage of RESTful API flexibility while still permitting machine readable introspection. Several other standards are machine readable by default, including <a href="https://www.w3.org/TR/soap/">SOAP</a>, <a href="https://www.w3.org/TR/sparql11-overview/">SPARQL</a> or <a href="https://graphql.org/">GraphQL</a> among many others, but despite this, RESTful APIs are the most widely used because of their low barrier to entry. Some standards exist for RESTful APIs, in many cases, these can also be described by OpenAPI.</p>

<h2 id="ingredients">Ingredients</h2>
<ul>
  <li>Web Application</li>
  <li>Existing API Documentation</li>
  <li>OpenAPI Editor</li>
</ul>

<h2 id="objectives">Objectives</h2>
<p>We will look at the existing REST service provided by the Metabolomics Workbench catalog: <a href="https://www.metabolomicsworkbench.org/tools/mw_rest.php">https://www.metabolomicsworkbench.org/tools/mw_rest.php</a>. This API is described for human consumption including examples for each endpoint. We will tackle some of the endpoints using OpenAPI.</p>

<p>Though OpenAPI can be edited by most standards editors because it is typically written in <a href="https://yaml.org/spec/1.2/spec.html">YAML</a> (a slightly ‘nicer’ version of <a href="https://github.com/nih-cfde/specifications-and-documentation/blob/master/draft-CFDE_glossary/glossary.md#JSON">JSON</a> that is equivalent), it is helpful to use an OpenAPI editor like <a href="https://app.swaggerhub.com/home">https://app.swaggerhub.com/home</a>. This will catch errors as you edit, and permit testing of the endpoints as you encode immediately.</p>

<!-- ![An example endpoint in an OpenAPI Editor](/the-fair-cookbook/content/recipes/16/images/ss1.png) -->
<p>An example endpoint in an OpenAPI Editor:
<br /></p>
<div><img src="./images/ss1.png" width="750px" style="padding:1px;border:thin solid black;" /></div>

<!-- ![A real response in an OpenAPI Editor](/the-fair-cookbook/content/recipes/16/images/ss2.png) -->
<p>A real response in an OpenAPI Editor:<br /></p>
<div><img src="./images/ss2.png" width="750px" style="padding:1px;border:thin solid black;" /></div>

<h2 id="recipe">Recipe</h2>

<h3 id="step-1-beginning-an-openapi-specification">Step 1: Beginning an OpenAPI specification</h3>
<p>We start by annotating useful descriptions for the API in the <code class="language-plaintext highlighter-rouge">info</code> field, this includes adding descriptors, version, license, and contact information. This gives your API an identity and this way it can be used in OpenAPI catalogs, for which there are several including <a href="https://smart-api.info/">SmartAPI</a>, making it possible to find your own APIs.</p>

<p>The <code class="language-plaintext highlighter-rouge">servers</code> field has the base url(s) for accessing the API we’re about to describe.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.0.0</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Metabolomics Workbench REST API</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1.0.0"</span>
  <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">The Metabolomics WorkBench REST service enables access to a variety of data (including metabolite structures, study metadata and experimental results) using HTTP requests. These requests may be carried out using a web browser or may be embedded in 3rd party applications or scripts to enable programmatic access. Most modern programming languages including PHP, Perl, Python, Java and Javascript have the capability to create HTTP request and interact with datasets such as this REST service.</span>
  <span class="na">license</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Metabolomics Workbench Terms of Use</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">https://www.metabolomicsworkbench.org/about/termsofuse.php</span>
  <span class="na">contact</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">https://www.metabolomicsworkbench.org/about/contact.php</span>
<span class="na">servers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">description</span><span class="pi">:</span> <span class="s">Metabolomics Workbench</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">https://www.metabolomicsworkbench.org/rest</span>
</code></pre></div></div>

<h3 id="step-2-describing-a-path">Step 2: Describing a path</h3>
<p>The Metabolomics API offers several examples, let’s tackle one of them:</p>

<table>
  <thead>
    <tr>
      <th>Example request</th>
      <th>Example URL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Show all publicly available studies (Project, Study, Analysis ID)</td>
      <td>https://www.metabolomicsworkbench.org/rest/study/study_id/ST/available</td>
    </tr>
  </tbody>
</table>

<p>This tells us what the endpoint does to an extent; let’s add that to our API under the <code class="language-plaintext highlighter-rouge">paths</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">/study/study_id/ST/available</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Fetch summary information for all studies</span>
</code></pre></div></div>

<p>The path is relative to the server url, and <code class="language-plaintext highlighter-rouge">get</code> refers to the REST method (<code class="language-plaintext highlighter-rouge">GET</code> as opposed to <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">PUT</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, …), in REST <code class="language-plaintext highlighter-rouge">GET</code> refers to reading a resource and is what happens when you send the following packet to a web server:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://www.metabolomicsworkbench.org/rest/study/study_id/ST/available HTTP/1.1
Host: www.metabolomicsworkbench.org
Content-Type: application/json

</code></pre></div></div>

<p>Note that your web browser does the same, albeit with a few more headers.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://www.metabolomicsworkbench.org/rest/study/study_id/ST/available HTTP/1.1
Host: www.metabolomicsworkbench.org
Content-Type: text/html
User-Agent: Mozilla/5.0 ...
Accept-language: en-US,en<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.5
Accept-Encoding: <span class="nb">gzip</span>, deflate

</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">GET</code> at the start is changed to <code class="language-plaintext highlighter-rouge">POST</code> or another value when sending actual data (at the bottom of the packet)</p>

<p>So let’s submit this packet to the webserver, or visit it in our web browser. The result is shown below:</p>

<pre><code class="language-raw">HTTP/1.1 200 OK
Server: Apache
Content-Type: application/json
Content-Length: 16158

{
  "1": {
    "project_id":"PR000001",
    "study_id":"ST000001",
    "analysis_id":"AN000001"
  },
  "2":{
    "project_id":"PR000002",
    "study_id":"ST000002",
    "analysis_id":"AN000002"
  },
  ...
  "1783":{
    "project_id":"PR000928",
    "study_id":"ST001364",
    "analysis_id":"AN002271"
  }
}
</code></pre>

<p>Note your web browser will only show you the bottom part, but the top part includes the <code class="language-plaintext highlighter-rouge">response code</code> <code class="language-plaintext highlighter-rouge">200</code> and the <code class="language-plaintext highlighter-rouge">response headers</code> before the body.</p>

<p>We didn’t know what the response would be by the webpage, but OpenAPI provides a means to describe this as well.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">/study/study_id/ST/available</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Fetch summary information for all studies</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Success</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="s">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">additionalProperties</span><span class="pi">:</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">project_id</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">study_id</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">analysis_id</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p>the <code class="language-plaintext highlighter-rouge">200</code> here refers to the HTTP status code, these are standardized by HTTP but the gist is:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2xx</td>
      <td>OK (created, no content, …)</td>
    </tr>
    <tr>
      <td>3xx</td>
      <td>Redirect (temporary, permanent, …)</td>
    </tr>
    <tr>
      <td>4xx</td>
      <td>Not OK (not found, permission denied, …)</td>
    </tr>
    <tr>
      <td>5xx</td>
      <td>Server Error</td>
    </tr>
  </tbody>
</table>

<p>We can explicitly describe what the response means for our application in the <code class="language-plaintext highlighter-rouge">description</code> under the response code. The <code class="language-plaintext highlighter-rouge">content -&gt; application/json</code> refers to the <code class="language-plaintext highlighter-rouge">Content-Type</code> returned on the response header. This header tells you that the body will be json, and not i.e. <code class="language-plaintext highlighter-rouge">text/html</code> which we view most webpages as.</p>

<p>Finally, the <code class="language-plaintext highlighter-rouge">schema</code> is JSON-Schema describing how the JSON should look. It also supports describing each field individually in depth, and specifying optional or mandatory fields. We use <code class="language-plaintext highlighter-rouge">additionalProperties</code> to refer to the <code class="language-plaintext highlighter-rouge">values</code> in the object, and <code class="language-plaintext highlighter-rouge">properties</code> on a <code class="language-plaintext highlighter-rouge">type: object</code> to refer to the <code class="language-plaintext highlighter-rouge">key</code> specific description.</p>

<p>The benefit of fully describing and endpoint like this is that a developer can fully understand what to expect from an endpoint, enabling them to determine code logic validity prior to having to test it at runtime. Furthermore, the SmartAPI initiative has an extension for relating those types to RDF for visions like the <a href="https://biothings.io/">BioThings</a>.</p>

<h3 id="step-3-adding-a-path-with-parameters">Step 3: Adding a path with parameters</h3>
<p>Let’s tackle our next endpoint:</p>

<table>
  <thead>
    <tr>
      <th>Example request</th>
      <th>Example URL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Fetch analysis information for a study</td>
      <td>https://www.metabolomicsworkbench.org/rest/study/study_id/ST000001/analysis</td>
    </tr>
  </tbody>
</table>

<p>While the example shows <code class="language-plaintext highlighter-rouge">ST000001</code> in reality, the idea is that this can be any study ID (such as those coming out of the previous endpoint).</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">/study/study_id/{study_id}/summary</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Fetch summary information for a study</span>
      <span class="na">parameters</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">study_id</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The unique study identifier</span>
        <span class="na">schema</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">pattern</span><span class="pi">:</span> <span class="s1">'</span><span class="s">^ST\d*$'</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s">ST000001</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Success</span>
</code></pre></div></div>

<p>We see some new concepts here, the first is the path which has a variable in it delineated by <code class="language-plaintext highlighter-rouge">{study_id}</code> where we would want the <code class="language-plaintext highlighter-rouge">study_id</code> to go. Paired with this we add an entry into the <code class="language-plaintext highlighter-rouge">parameters</code> array and state the same name <code class="language-plaintext highlighter-rouge">study_id</code> is <code class="language-plaintext highlighter-rouge">in: path</code> referring to this path-style variable substitution.</p>

<p>Parameters can be added in other places as well, google, for instance, describes searches like so: <code class="language-plaintext highlighter-rouge">https://www.google.com/search?q=smartapi&amp;sourceid=chrome&amp;ie=UTF-8</code>, the <code class="language-plaintext highlighter-rouge">?q=...&amp;sourceid=...</code> are referred to as query parameters and they are in the form: <code class="language-plaintext highlighter-rouge">?{name}={value}&amp;{name}={value}&amp;...</code>. You could describe these in OpenAPI as well by using <code class="language-plaintext highlighter-rouge">in: query</code>.</p>

<p>In the case of a <code class="language-plaintext highlighter-rouge">POST</code> you might use, <code class="language-plaintext highlighter-rouge">in: body</code> referring to the content you send with your request.</p>

<p>Again, each of these parameters is validatable with JSONSchema, in our current example, we’ve used a JSONSchema pattern to constrain the type of string acceptable by the endpoint, in the case of a body, it could be an elaborate JSON object such as our response schema.</p>

<p>Finally, we’ve included an <code class="language-plaintext highlighter-rouge">example</code> which will help developers with rapid testing of endpoints given valid examples. Using this example, we can use our OpenAPI Editor to trigger a new request:</p>

<!-- ![](/the-fair-cookbook/content/recipes/16/images/ss2.png) -->
<div><img src="./images/ss2.png" width="750px" style="padding:1px;border:thin solid black;" /></div>

<p>With the output, we can complete our path by annotating the response:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">/study/study_id/{study_id}/summary</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="s">...</span>
      <span class="s">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Success</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="s">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">study_id</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">study_title</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">study_type</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">institute</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">department</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">last_name</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">first_name</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">email</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">submit_date</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">study_summary</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">subject_species</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<h3 id="step-4-identifying-components">Step 4: Identifying components</h3>
<p>In some cases, a common set of JSON objects are reused throughout the API. It is often meaningful to turn these into their own ‘component’ and reference them. It’s also extremely helpful to include descriptions especially for fields that are not directly interpretable.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">...</span>
  <span class="s">/study/study_id/{study_id}/summary</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="s">...</span>
      <span class="s">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Success</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="s">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="s">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/StudySummary'</span>
  <span class="s">...</span>
<span class="na">components</span><span class="pi">:</span>
  <span class="na">StudySummary</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">Summary information about a study</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">properties</span><span class="pi">:</span>
      <span class="na">study_id</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">A unique identifier for this study</span>
      <span class="na">study_title</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">study_type</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The type of treatment used in the study</span>
      <span class="na">institute</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The institution that performed the study</span>
      <span class="na">department</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The department in the institute that performed the study</span>
      <span class="na">last_name</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The last name of the PI responsible for the study</span>
      <span class="na">first_name</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The first name of the PI responsible for the study</span>
      <span class="na">email</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The email to contact for information about the study</span>
      <span class="na">submit_date</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The date this study was submitted to metabolomics workbench</span>
      <span class="na">study_summary</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">A detailed summary describing the study</span>
      <span class="na">subject_species</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The species of the subject of the study</span>
</code></pre></div></div>

<p>Under <code class="language-plaintext highlighter-rouge">components</code>, as many individual components can be specified, and they can be referenced using <code class="language-plaintext highlighter-rouge">$ref</code> with <a href="https://json-schema.org/draft/2019-09/relative-json-pointer.html">JSON-Schema pointers</a> as shown above.</p>

<h3 id="step-5-smartapi-extension">Step 5: SmartAPI extension</h3>
<p>When it comes to <em>automatic</em> interoperability, the <a href="https://smart-api.info/guide">SmartAPI extension</a> to OpenAPI is almost essential. It provides mechanisms for adding RDF annotations to parameters or responses. We’ll demonstrate it on a new endpoint:</p>

<table>
  <thead>
    <tr>
      <th>Example request</th>
      <th>Example URL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Fetch all protein fields from Entrez gene id</td>
      <td>https://www.metabolomicsworkbench.org/rest/protein/gene_id/19/all/</td>
    </tr>
  </tbody>
</table>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">paths</span><span class="pi">:</span>
  <span class="s">/protein/gene_id/{gene_id}/all/</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Fetch all protein fields from Entrez gene id</span>
      <span class="na">parameters</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">gene_id</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">The unique study identifier</span>
        <span class="na">schema</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">example</span><span class="pi">:</span> <span class="s1">'</span><span class="s">19'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="s1">'</span><span class="s">200'</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">Success</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="s">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">properties</span><span class="pi">:</span>
                  <span class="na">gene_id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Entrez Gene ID</span>
                  <span class="na">mgp_id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">MGP ID</span>
                  <span class="na">gene_name</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Verbose gene name</span>
                  <span class="na">gene_symbol</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Entrez Gene Symbol</span>
                  <span class="na">taxid</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Taxonomy taxon ID</span>
                  <span class="na">species</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Species name</span>
                  <span class="na">species_long</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Species official name</span>
                  <span class="na">mrna_id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">ID of the MRNA</span>
                  <span class="na">refseq_id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">ID on refseq</span>
                  <span class="na">protein_gi</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">ID on GI</span>
                  <span class="na">uniprot_id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">ID on GI</span>
                  <span class="na">protein_entry</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Protein term</span>
                  <span class="na">protein_name</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Verbose protein name</span>
                  <span class="na">seqlength</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">descrition</span><span class="pi">:</span> <span class="s">Length of the sequence</span>
                  <span class="na">seq</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">The protein sequence itself</span>
          <span class="na">x-responseValueType</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">gene_id</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://identifiers.org/ncbigene</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">gene_symbol</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://identifiers.org/genecards</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">tax_id</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://identifiers.org/taxonomy</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">mrna_id</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://www.ncbi.nlm.nih.gov/nuccore</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">refseq_id</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://www.ncbi.nlm.nih.gov/protein</span>
          <span class="pi">-</span> <span class="na">x-path</span><span class="pi">:</span> <span class="s">uniprot_id</span>
            <span class="na">x-valueType</span><span class="pi">:</span> <span class="s">https://identifiers.org/uniprot</span>
</code></pre></div></div>

<p>Here we see our usual path setup with a new section: <code class="language-plaintext highlighter-rouge">x-responseValueType</code>, this is the smartAPI extension, each <code class="language-plaintext highlighter-rouge">x-path</code> refers to the path in the JSON object (using <code class="language-plaintext highlighter-rouge">.</code> on nested keys), for instance, the <code class="language-plaintext highlighter-rouge">gene_id</code> which doesn’t need any <code class="language-plaintext highlighter-rouge">.</code> because it’s the root of the response object. The <code class="language-plaintext highlighter-rouge">x-valueType</code> here identifies the id namespace or context for which that value has meaning. Typically, this is a prefix path, in other words, you would produce a full URI with: <code class="language-plaintext highlighter-rouge">{x-valueType}/{actual_value}</code>.</p>

<p><a href="http://identifiers.org/">identifiers.org</a> is a public resource cataloging actual identifier schemes making it an ideal way to namespace a given identifier. It has the added benefit of providing an API for accessing additional metadata such as cached <a href="https://schema.org/">schema.org</a> annotations on the landing page of the resulting identifier.</p>

<p>With the annotations fully described here, it becomes possible to eventually utilize your API for federated RDF queries without any additional effort, this was demonstrated by the <a href="https://biothings.io/">BioThings</a> which can integrate SmartAPI APIs with proper annotations. It also permits end users to find your APIs knowing their identifiers (i.e. ncbigenes).</p>

<h3 id="step-6-publishing-and-utilizing-your-openapismartapi">Step 6: Publishing and utilizing your OpenAPI/SmartAPI</h3>
<p>Once you have a working OpenAPI document, there are numerous things that you can now do. Firstly, your API can be published on <a href="https://smart-api.info/">smart-api.info</a>, permitting people and machines to locate it and potentially utilize it.</p>

<p>But you can also produce interactive documentation much like the output seen in the OpenAPI editor to publish on your webpage.</p>

<p>It is even possible to automatically generate statically or dynamically code in many different programming languages for API clients or Server stubs (i.e. for API first or compatibility) with the <a href="https://github.com/OpenAPITools/openapi-generator">openapi-generator</a>.</p>

<p>An <a href="https://github.com/IBM/openapi-to-graphql">initiative by IBM</a> provides a mechanism for interoperating an OpenAPI documented endpoint with <a href="https://graphql.org/">GraphQL</a>.</p>

<p>These various capabilities make an API extremely accessible, lowering many barriers to entry for interoperability and reusability of your API.</p>

<h2 id="conclusion">Conclusion</h2>
<p>We’ve walked you through a case study where we documented an API using OpenAPI and SmartAPI extensions to build a document that will vastly improve the FAIRness of your API. After registering your API on an API catalog platform such as <a href="https://smart-api.info/">smart-api.info</a> you will enable  developers and programs to find, introspect and interoperate with our API. Furthermore, existing tooling around OpenAPI can enable the accessibility and reusability of your APIs in many programming languages and other standardized systems.</p>

            </div>
            <div class="c-textbook__footer" id="textbook_footer">
              
<nav class="c-page__nav">
  

  
</nav>

              <footer>
  <p class="footer">This project is supported by NIH CFDE program <a href="https://commonfund.nih.gov/dataecosystem"><img src="/the-fair-cookbook/assets/images/logo/CFDE-logo.png" height="20" alt="NIH flag" class="float-left bottom-margin"></a> <script>mermaid.init();</script></p>
</footer>

            </div>

        </div>
      </main>
    </div>
  </body>
</html>
